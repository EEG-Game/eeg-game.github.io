<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EEG Waveform Recognition Trainer</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --correct: #2ecc71;
            --incorrect: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .quiz-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .question-counter {
            text-align: right;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .eeg-display {
            background-color: #1a1a1a;
            height: 200px;
            border-radius: 8px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .waveform {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 100px;
            transform: translateY(-50%);
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .option {
            padding: 15px;
            background-color: var(--light);
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-weight: 500;
        }
        
        .option:hover {
            background-color: #d6dbdf;
            transform: translateY(-2px);
        }
        
        .option.selected {
            border-color: var(--secondary);
            background-color: #d6eaf8;
        }
        
        .option.correct {
            border-color: var(--correct);
            background-color: #d5f5e3;
        }
        
        .option.incorrect {
            border-color: var(--incorrect);
            background-color: #fadbd8;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        #submit-btn {
            background-color: var(--secondary);
            color: white;
        }
        
        #submit-btn:hover {
            background-color: #2980b9;
        }
        
        #next-btn {
            background-color: var(--primary);
            color: white;
        }
        
        #next-btn:hover {
            background-color: #1c2833;
        }
        
        #restart-btn {
            background-color: var(--accent);
            color: white;
        }
        
        #restart-btn:hover {
            background-color: #c0392b;
        }
        
        .results {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
        }
        
        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--light);
        }
        
        .feedback.correct {
            border-left: 5px solid var(--correct);
        }
        
        .feedback.incorrect {
            border-left: 5px solid var(--incorrect);
        }
        
        .wave-info {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            display: none;
        }
        
        .wave-info h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>EEG Waveform Recognition Trainer</h1>
            <p class="subtitle">Test your knowledge of EEG patterns in epilepsy diagnosis</p>
        </header>
        
        <div class="quiz-container">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            
            <div class="question-counter">
                Question <span id="current-question">1</span> of <span id="total-questions">10</span>
            </div>
            
            <h2 id="question-text">Identify this EEG waveform:</h2>
            
            <div class="eeg-display">
                <canvas class="waveform" id="waveform"></canvas>
            </div>
            
            <div class="options" id="options-container">
                <!-- Options will be generated by JavaScript -->
            </div>
            
            <div class="wave-info" id="wave-info">
                <h3>About this waveform</h3>
                <p id="wave-description"></p>
            </div>
            
            <div class="controls">
                <button id="submit-btn">Submit Answer</button>
                <button id="next-btn" style="display: none;">Next Question</button>
            </div>
        </div>
        
        <div class="results" id="results">
            <h2>Quiz Completed!</h2>
            <div class="score">Your Score: <span id="score-value">0</span>/<span id="total-questions-result">10</span></div>
            <p id="performance-message"></p>
            <button id="restart-btn">Restart Quiz</button>
        </div>
    </div>

    <script>
        // EEG waveform data
        const waveforms = [
            {
                name: "Spike-and-Wave Discharge",
                description: "Classic 3 Hz spike-and-wave pattern seen in absence seizures. Characterized by a sharp spike followed by a slow wave, repeating at approximately 3 cycles per second.",
                frequency: "3 Hz",
                amplitude: "High",
                clinicalSignificance: "Typical absence epilepsy"
            },
            {
                name: "Polyspike Waves",
                description: "Multiple spikes followed by a slow wave, often seen in juvenile myoclonic epilepsy and other generalized epilepsy syndromes.",
                frequency: "4-6 Hz",
                amplitude: "High",
                clinicalSignificance: "Generalized epilepsy syndromes"
            },
            {
                name: "Focal Spikes",
                description: "Localized spikes indicating focal cortical irritability, often seen in focal epilepsies.",
                frequency: "Variable",
                amplitude: "Variable",
                clinicalSignificance: "Focal epilepsy"
            },
            {
                name: "Hypsarrhythmia",
                description: "Chaotic, high-voltage slow waves with multifocal spikes, characteristic of infantile spasms (West syndrome).",
                frequency: "Disorganized",
                amplitude: "High",
                clinicalSignificance: "Infantile spasms"
            },
            {
                name: "Slow Spike-and-Wave",
                description: "Slow spike-and-wave complexes at 1.5-2.5 Hz, seen in Lennox-Gastaut syndrome.",
                frequency: "1.5-2.5 Hz",
                amplitude: "High",
                clinicalSignificance: "Lennox-Gastaut syndrome"
            },
            {
                name: "Generalized Paroxysmal Fast Activity",
                description: "Rapid bursts of spikes or polyspikes, often during sleep, seen in Lennox-Gastaut syndrome.",
                frequency: "10-20 Hz",
                amplitude: "Variable",
                clinicalSignificance: "Lennox-Gastaut syndrome"
            },
            {
                name: "Photoparoxysmal Response",
                description: "Generalized spikes or spike-and-wave discharges triggered by photic stimulation.",
                frequency: "Variable",
                amplitude: "Variable",
                clinicalSignificance: "Photosensitive epilepsy"
            },
            {
                name: "Temporal Lobe Sharp Waves",
                description: "Sharp waves or spikes localized to temporal regions, characteristic of temporal lobe epilepsy.",
                frequency: "Variable",
                amplitude: "Medium to high",
                clinicalSignificance: "Temporal lobe epilepsy"
            },
            {
                name: "Rolandic Spikes",
                description: "Centrotemporal spikes with characteristic horizontal dipole, seen in benign epilepsy with centrotemporal spikes (BECTS).",
                frequency: "Variable",
                amplitude: "High",
                clinicalSignificance: "Benign epilepsy with centrotemporal spikes"
            },
            {
                name: "Periodic Lateralized Epileptiform Discharges (PLEDs)",
                description: "Periodic discharges occurring at regular intervals, often indicative of acute structural brain injury.",
                frequency: "0.5-2 Hz",
                amplitude: "High",
                clinicalSignificance: "Acute cerebral injury"
            }
        ];

        // Quiz state
        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        let quizCompleted = false;
        
        // DOM elements
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress');
        const currentQuestionElement = document.getElementById('current-question');
        const totalQuestionsElement = document.getElementById('total-questions');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const resultsContainer = document.getElementById('results');
        const scoreValue = document.getElementById('score-value');
        const totalQuestionsResult = document.getElementById('total-questions-result');
        const performanceMessage = document.getElementById('performance-message');
        const waveInfo = document.getElementById('wave-info');
        const waveDescription = document.getElementById('wave-description');
        const waveformCanvas = document.getElementById('waveform');
        const ctx = waveformCanvas.getContext('2d');
        
        // Initialize the quiz
        function initQuiz() {
            currentQuestion = 0;
            score = 0;
            selectedOption = null;
            quizCompleted = false;
            
            resultsContainer.style.display = 'none';
            waveInfo.style.display = 'none';
            submitBtn.style.display = 'block';
            nextBtn.style.display = 'none';
            
            loadQuestion();
        }
        
        // Load a question
        function loadQuestion() {
            resetOptions();
            waveInfo.style.display = 'none';
            
            // Update progress
            const progress = ((currentQuestion) / waveforms.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            currentQuestionElement.textContent = currentQuestion + 1;
            totalQuestionsElement.textContent = waveforms.length;
            totalQuestionsResult.textContent = waveforms.length;
            
            // Get current waveform
            const waveform = waveforms[currentQuestion];
            
            // Draw the waveform
            drawWaveform(waveform);
            
            // Shuffle options
            const options = getShuffledOptions(waveform.name);
            
            // Create option buttons
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => selectOption(optionElement, option));
                optionsContainer.appendChild(optionElement);
            });
            
            submitBtn.disabled = true;
        }
        
        // Draw a simulated EEG waveform
        function drawWaveform(waveform) {
            const width = waveformCanvas.width = waveformCanvas.offsetWidth;
            const height = waveformCanvas.height = waveformCanvas.offsetHeight;
            
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#00ff00';
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            
            // Different drawing algorithms based on waveform type
            switch(waveform.name) {
                case "Spike-and-Wave Discharge":
                    drawSpikeAndWave(width, height);
                    break;
                case "Polyspike Waves":
                    drawPolyspikeWaves(width, height);
                    break;
                case "Focal Spikes":
                    drawFocalSpikes(width, height);
                    break;
                case "Hypsarrhythmia":
                    drawHypsarrhythmia(width, height);
                    break;
                case "Slow Spike-and-Wave":
                    drawSlowSpikeAndWave(width, height);
                    break;
                case "Generalized Paroxysmal Fast Activity":
                    drawGeneralizedParoxysmalFastActivity(width, height);
                    break;
                case "Photoparoxysmal Response":
                    drawPhotoparoxysmalResponse(width, height);
                    break;
                case "Temporal Lobe Sharp Waves":
                    drawTemporalLobeSharpWaves(width, height);
                    break;
                case "Rolandic Spikes":
                    drawRolandicSpikes(width, height);
                    break;
                case "Periodic Lateralized Epileptiform Discharges (PLEDs)":
                    drawPLEDs(width, height);
                    break;
            }
            
            ctx.stroke();
        }
        
        // Waveform drawing functions
        function drawSpikeAndWave(width, height) {
            const centerY = height / 2;
            const points = 200;
            const spikeInterval = width / 3; // 3 spikes in the display
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                const spikePos = Math.floor(x / spikeInterval);
                const relativeX = x - spikePos * spikeInterval;
                
                let y;
                if (relativeX < spikeInterval * 0.2) {
                    // Rising to spike
                    y = centerY - (relativeX / (spikeInterval * 0.2)) * 40;
                } else if (relativeX < spikeInterval * 0.4) {
                    // Falling from spike to wave
                    y = centerY - 40 + ((relativeX - spikeInterval * 0.2) / (spikeInterval * 0.2)) * 80;
                } else {
                    // Slow wave
                    y = centerY + 40 * Math.sin((relativeX - spikeInterval * 0.4) / (spikeInterval * 0.6) * Math.PI * 2);
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawPolyspikeWaves(width, height) {
            const centerY = height / 2;
            const points = 200;
            const waveInterval = width / 2; // 2 complexes in the display
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                const wavePos = Math.floor(x / waveInterval);
                const relativeX = x - wavePos * waveInterval;
                
                let y;
                if (relativeX < waveInterval * 0.3) {
                    // Multiple spikes
                    const spikeCount = 3;
                    const spikeWidth = waveInterval * 0.3 / spikeCount;
                    const spikeIndex = Math.floor(relativeX / spikeWidth);
                    const spikeRelativeX = relativeX - spikeIndex * spikeWidth;
                    
                    if (spikeRelativeX < spikeWidth * 0.3) {
                        y = centerY - (spikeRelativeX / (spikeWidth * 0.3)) * 50;
                    } else if (spikeRelativeX < spikeWidth * 0.6) {
                        y = centerY - 50 + ((spikeRelativeX - spikeWidth * 0.3) / (spikeWidth * 0.3)) * 100;
                    } else {
                        y = centerY + 50 * (spikeRelativeX - spikeWidth * 0.6) / (spikeWidth * 0.4);
                    }
                } else {
                    // Slow wave
                    y = centerY + 40 * Math.sin((relativeX - waveInterval * 0.3) / (waveInterval * 0.7) * Math.PI * 2);
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        // Simplified drawing for other waveforms (in a real app, these would be more detailed)
        function drawFocalSpikes(width, height) {
            drawRandomSpikes(width, height, 5, 60);
        }
        
        function drawHypsarrhythmia(width, height) {
            drawChaoticPattern(width, height);
        }
        
        function drawSlowSpikeAndWave(width, height) {
            const centerY = height / 2;
            const points = 200;
            const spikeInterval = width / 2; // 2 spikes in the display
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                const spikePos = Math.floor(x / spikeInterval);
                const relativeX = x - spikePos * spikeInterval;
                
                let y;
                if (relativeX < spikeInterval * 0.3) {
                    // Spike
                    y = centerY - (relativeX / (spikeInterval * 0.3)) * 40;
                } else if (relativeX < spikeInterval * 0.5) {
                    // Falling from spike
                    y = centerY - 40 + ((relativeX - spikeInterval * 0.3) / (spikeInterval * 0.2)) * 80;
                } else {
                    // Slow wave
                    y = centerY + 40 * Math.sin((relativeX - spikeInterval * 0.5) / (spikeInterval * 0.5) * Math.PI);
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawGeneralizedParoxysmalFastActivity(width, height) {
            drawFastActivity(width, height);
        }
        
        function drawPhotoparoxysmalResponse(width, height) {
            drawPhoticResponsePattern(width, height);
        }
        
        function drawTemporalLobeSharpWaves(width, height) {
            drawFocalSharpWaves(width, height, width * 0.7);
        }
        
        function drawRolandicSpikes(width, height) {
            drawDipoleSpikes(width, height);
        }
        
        function drawPLEDs(width, height) {
            drawPeriodicDischarges(width, height);
        }
        
        // Helper drawing functions
        function drawRandomSpikes(width, height, spikeCount, maxAmplitude) {
            const centerY = height / 2;
            const points = 200;
            const spikeInterval = width / spikeCount;
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                const spikePos = Math.floor(x / spikeInterval);
                const relativeX = x - spikePos * spikeInterval;
                
                let y = centerY;
                
                // Add baseline noise
                y += (Math.random() - 0.5) * 10;
                
                // Add spikes at intervals
                if (relativeX < spikeInterval * 0.2) {
                    const spikeHeight = maxAmplitude * (0.5 + Math.random() * 0.5);
                    y -= (relativeX / (spikeInterval * 0.2)) * spikeHeight;
                } else if (relativeX < spikeInterval * 0.4) {
                    const spikeHeight = maxAmplitude * (0.5 + Math.random() * 0.5);
                    y -= spikeHeight - ((relativeX - spikeInterval * 0.2) / (spikeInterval * 0.2)) * spikeHeight * 2;
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawChaoticPattern(width, height) {
            const centerY = height / 2;
            const points = 200;
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                
                // Chaotic pattern with high amplitude slow waves and random spikes
                let y = centerY;
                
                // Slow wave component
                y += 60 * Math.sin(x / width * Math.PI * 8);
                
                // Random spikes
                if (Math.random() < 0.1) {
                    y -= 30 + Math.random() * 40;
                }
                
                // High amplitude noise
                y += (Math.random() - 0.5) * 40;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawFastActivity(width, height) {
            const centerY = height / 2;
            const points = 200;
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                
                // Fast activity with bursts
                let y = centerY;
                
                // Basic fast rhythm
                y += 30 * Math.sin(x / width * Math.PI * 30);
                
                // Bursts of higher amplitude
                if (x > width * 0.2 && x < width * 0.4) {
                    y += 20 * Math.sin(x / width * Math.PI * 40);
                }
                
                if (x > width * 0.6 && x < width * 0.8) {
                    y += 20 * Math.sin(x / width * Math.PI * 40);
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawPhoticResponsePattern(width, height) {
            const centerY = height / 2;
            const points = 200;
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                
                // Response to photic stimulation
                let y = centerY;
                
                // Background activity
                y += 10 * Math.sin(x / width * Math.PI * 15);
                
                // Photic stimulation response (generalized spikes)
                if (x > width * 0.3 && x < width * 0.7) {
                    const flashFrequency = 10; // Hz
                    const flashInterval = width / flashFrequency;
                    const flashPos = Math.floor((x - width * 0.3) / flashInterval);
                    const relativeX = (x - width * 0.3) - flashPos * flashInterval;
                    
                    if (relativeX < flashInterval * 0.2) {
                        y -= 50 * (relativeX / (flashInterval * 0.2));
                    } else if (relativeX < flashInterval * 0.4) {
                        y -= 50 - 50 * ((relativeX - flashInterval * 0.2) / (flashInterval * 0.2));
                    }
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawFocalSharpWaves(width, height, focusX) {
            const centerY = height / 2;
            const points = 200;
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                
                let y = centerY;
                
                // Background activity
                y += 10 * Math.sin(x / width * Math.PI * 10);
                
                // Focal sharp waves around focusX
                const distanceFromFocus = Math.abs(x - focusX);
                if (distanceFromFocus < width * 0.2) {
                    const sharpWaveFactor = 1 - (distanceFromFocus / (width * 0.2));
                    y -= 40 * sharpWaveFactor * Math.sin(x / width * Math.PI * 5);
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawDipoleSpikes(width, height) {
            const centerY = height / 2;
            const points = 200;
            const spikeInterval = width / 3;
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                const spikePos = Math.floor(x / spikeInterval);
                const relativeX = x - spikePos * spikeInterval;
                
                let y = centerY;
                
                // Rolandic spike with horizontal dipole
                if (relativeX < spikeInterval * 0.3) {
                    // Negative phase (upward deflection)
                    y -= (relativeX / (spikeInterval * 0.3)) * 60;
                } else if (relativeX < spikeInterval * 0.6) {
                    // Positive phase (downward deflection)
                    y -= 60 - ((relativeX - spikeInterval * 0.3) / (spikeInterval * 0.3)) * 120;
                } else {
                    // Return to baseline
                    y += 60 * (relativeX - spikeInterval * 0.6) / (spikeInterval * 0.4);
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        function drawPeriodicDischarges(width, height) {
            const centerY = height / 2;
            const points = 200;
            const dischargeInterval = width / 4; // 4 discharges in the display
            
            for (let i = 0; i < points; i++) {
                const x = (i / points) * width;
                const dischargePos = Math.floor(x / dischargeInterval);
                const relativeX = x - dischargePos * dischargeInterval;
                
                let y = centerY;
                
                // Background activity
                y += 5 * Math.sin(x / width * Math.PI * 8);
                
                // Periodic discharges
                if (relativeX < dischargeInterval * 0.2) {
                    // Sharp wave
                    y -= 50 * (relativeX / (dischargeInterval * 0.2));
                } else if (relativeX < dischargeInterval * 0.4) {
                    // Slow wave
                    y -= 50 - 50 * ((relativeX - dischargeInterval * 0.2) / (dischargeInterval * 0.2));
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
        }
        
        // Get shuffled options including the correct one
        function getShuffledOptions(correctAnswer) {
            const otherWaveforms = waveforms.filter(w => w.name !== correctAnswer);
            const randomOptions = [];
            
            // Select 3 random incorrect options
            while (randomOptions.length < 3) {
                const randomIndex = Math.floor(Math.random() * otherWaveforms.length);
                const option = otherWaveforms[randomIndex].name;
                if (!randomOptions.includes(option)) {
                    randomOptions.push(option);
                }
            }
            
            // Add the correct answer
            randomOptions.push(correctAnswer);
            
            // Shuffle the options
            for (let i = randomOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [randomOptions[i], randomOptions[j]] = [randomOptions[j], randomOptions[i]];
            }
            
            return randomOptions;
        }
        
        // Select an option
        function selectOption(optionElement, option) {
            if (quizCompleted) return;
            
            // Reset previous selection
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select new option
            optionElement.classList.add('selected');
            selectedOption = option;
            submitBtn.disabled = false;
        }
        
        // Reset options styling
        function resetOptions() {
            optionsContainer.innerHTML = '';
            selectedOption = null;
            submitBtn.disabled = true;
        }
        
        // Submit answer
        function submitAnswer() {
            if (selectedOption === null) return;
            
            const correctAnswer = waveforms[currentQuestion].name;
            const options = document.querySelectorAll('.option');
            
            // Disable all options
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            // Mark correct and incorrect
            options.forEach(opt => {
                if (opt.textContent === correctAnswer) {
                    opt.classList.add('correct');
                } else if (opt.textContent === selectedOption) {
                    opt.classList.add('incorrect');
                }
            });
            
            // Update score
            if (selectedOption === correctAnswer) {
                score++;
            }
            
            // Show waveform information
            waveDescription.textContent = waveforms[currentQuestion].description;
            waveInfo.style.display = 'block';
            
            // Show next button
            submitBtn.style.display = 'none';
            nextBtn.style.display = 'block';
        }
        
        // Go to next question
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < waveforms.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        // Show results
        function showResults() {
            quizCompleted = true;
            document.querySelector('.quiz-container').style.display = 'none';
            resultsContainer.style.display = 'block';
            
            scoreValue.textContent = score;
            totalQuestionsResult.textContent = waveforms.length;
            
            // Performance message
            const percentage = (score / waveforms.length) * 100;
            if (percentage >= 90) {
                performanceMessage.textContent = "Excellent! You have a strong understanding of EEG waveforms in epilepsy.";
            } else if (percentage >= 70) {
                performanceMessage.textContent = "Good job! You have a solid foundation but could use more practice.";
            } else if (percentage >= 50) {
                performanceMessage.textContent = "Not bad! Keep studying to improve your recognition skills.";
            } else {
                performanceMessage.textContent = "Keep practicing! Review the waveforms and their clinical significance.";
            }
        }
        
        // Event listeners
        submitBtn.addEventListener('click', submitAnswer);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', () => {
            document.querySelector('.quiz-container').style.display = 'block';
            initQuiz();
        });
        
        // Initialize the quiz
        initQuiz();
    </script>
</body>
</html>
